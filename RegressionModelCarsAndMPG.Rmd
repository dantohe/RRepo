---
title: "Regression Models: Cars And MPG"
author: "DA"
date: "May 27, 2016"
output: pdf_document
---
#Executive Summary

Scenario: you work for Motor Trend, a magazine about the automobile industry. Looking at a data set of a collection of cars, they are interested in exploring the relationship between a set of variables and miles per gallon (MPG) (outcome). They are particularly interested in the following two questions:  
- Is an automatic or manual transmission better for MPG?  
- Quantify the MPG difference between automatic and manual transmissions  

This brief analysis considers cars fuel economy and a set of variables, in particular the car transmission (automatic versus manual). We use mtcars dataset made available by Motor Trend Magazine.   
Technically, we evaluate this relationship using linear regression. 

Based on the dataset we show that the manual transmission has an advantage over the automatic one when it comes to MPG (miles per gallon) - see Figure 1.

#The Data

Loading the mtcars dataset, data frame with 32 observations on 11 variables (source: https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html).  

[, 1]	mpg	Miles/(US) gallon  
[, 2]	cyl	Number of cylinders  
[, 3]	disp	Displacement (cu.in.)  
[, 4]	hp	Gross horsepower  
[, 5]	drat	Rear axle ratio  
[, 6]	wt	Weight (1000 lbs)  
[, 7]	qsec	1/4 mile time  
[, 8]	vs	V/S  
[, 9]	am	Transmission (0 = automatic, 1 = manual)  
[,10]	gear	Number of forward gears  
[,11]	carb	Number of carburetors  


```{r}
data(mtcars)
head(mtcars)
```

##Shapiro-Wilk Test - checking on population   
Using Shapiro-Wilk Normality Test and getting a p-value = 0.1229 which tranlates in the fact that we cannot reject  reject the NULL hypothesis that the samples came from a normal distribution.  

```{r}
shapiro.test(mtcars$mpg)
```

##T-test - comparing the means of MPG and type of transmission
We get a very small p-value which translates in the fact that the difference in means is not by chance but indeed there is clear difference in these two populations. So we reject the NULL hypothesis: "these two samples have the same means."  
```{r}
t.test(mtcars$mpg, mtcars$am, var.equal=TRUE, paired=FALSE)
```

#Regression  Models
Building a regression model using Backward Stepwise Regression (starting with all predictors and removes the ones that are not statistically significant).

```{r, results="hide"}
initial.model <- lm(mpg ~., data= mtcars)
best.model <- step(initial.model, direction = "both")
```

##Sumarizing the best regression model
The most significant variables are idenfied as being:   
- the weight of the car (wt)   
- the 1/4 mile time (qsec)
The trasnmission seems to be of a lower importance as predictor of MPG.

We see a really small p-value (1.21e-11 musch smaller than 0.05) meaning a good model.
We also see an decent R-squared: 0.8497 which tranlates to outcome variance explained by this model.
```{r}
summary(best.model)
```



#Appendix
Figure 1: Which transmission achieves better mileage (Miles per Gallon)?  
As we can see from the boxplot below there is a distinct difference that favors the manual transmission over the automatic when it comes to get better millage.

```{r}
library(ggplot2)
data("mtcars")
g = ggplot(mtcars, aes(factor(am), mpg, fill=factor(am)))
g = g + geom_boxplot()
g = g + geom_jitter(position=position_jitter(width=.2, height=1))
g = g + scale_fill_discrete(name="Transmission", breaks=c("0", "1"),
                            labels=c("Auto", "Manual"))
g = g + ylab("Miles Per Gallon")
g = g + xlab("Transmission")
g
```


```{r}
# par(mfrow=c(2, 2))
plot(best.model)

```

